(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{2139:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(19);function o(e){try{return r.element(document.body).injector().get(e)}catch(t){}}},421:function(e,t,n){"use strict";n.r(t),n.d(t,"openAddToWebProjectDialog",(function(){return p}));var r=n(72),o=n.n(r),a=n(2139);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":document.querySelector("meta[name=csrf-token]").getAttribute("content")}},t);return fetch(e,n)}n(2154),n(2155);function u(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}function p(e){return f.apply(this,arguments)}function f(){return(f=d(o.a.mark((function e(t){var n,r,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.families,r=t.projectSelectorModelPromise,i=t.editorSaveState,c=Object(a.a)("DialogService"),e.next=4,c.show("/angular_templates/dialogs/add_fonts_to_web_project_web_component.html",{skipBodyListeners:!0,recenterOnResize:!0,extraWrapperClass:"add-fonts-to-web-project-dialog-wrapper"});case 4:(s=document.createElement("af-add-to-web-project-dialog")).families=n,r.then((function(e){s.projects=e.projects,s.familyIsCJK=e.is_family_CJK})),s.addEventListener("cancel",(function(){return c.close()})),s.addEventListener("create",(function(e){return l(e,i)})),s.addEventListener("save",(function(e){return v(e,i)})),document.getElementById("add-fonts-to-web-project-dialog").appendChild(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return m.apply(this,arguments)}function m(){return(m=d(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("/kits",{body:JSON.stringify(b(t.target,!0))});case 2:if(!(r=e.sent).ok){e.next=10;break}return e.t0=y,e.next=7,r.json();case 7:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){var n=[];return e.families.forEach((function(t){var r=t.variations.filter((function(t){return e.selectedIds.includes(t.id)}));if(!(r.length<1)){var o={opaque_id:t.web_id,font_variations:r.map((function(e){return e.id}))};n.push(o)}})),t?{kit:{name:e.newProjectName},families:n}:{id:e.selectedProjectId,families:n}}function y(e,t){var n,r,o,i=e.styles.map((function(e){return{cssFontStack:e.family.css_font_stack,name:e.name,style:e.style,weight:e.font.web.weight,is_variable_font:e.is_variable_font,variable_font_data:e.variable_font_data}})),c=document.createElement("af-add-to-web-project-confirmation-dialog"),s=e.added_to_project_info,u=e.embed_code,d=u.project_embed_details,p=t&&(n={},r=t.postscriptName,o=t.axes,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n);c.setData({families:i,familyCustomSettings:p,editorLink:s.editor_link,projectName:s.name,cssSnippet:d.css_code,cssImportSnippet:d.css_import_code,dynamicJSSnippet:d.async_javascript_code}),u.is_dynamic&&c.setAttribute("dynamic","");var f=Object(a.a)("DialogService");c.addEventListener("done",(function(){return f.close()})),document.getElementById("add-fonts-to-web-project-dialog").replaceChildren(c)}function v(e,t){return j.apply(this,arguments)}function j(){return(j=d(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("/kits/update",{body:JSON.stringify(b(t.target))});case 2:if(!(r=e.sent).ok){e.next=10;break}return e.t0=y,e.next=7,r.json();case 7:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=51-a95368889eceb88e94bd.chunk.js.map